``` c++
#include <iostream>
#include <fstream>
#include <map>
#include <queue>
#include <string>
#include <vector>

using namespace std;

int k;
int bucket[8]; //현재
int bucket_volume[7]; //최종
int bucket_goal[7];  //목표
map<string, int> chk;
string answer;
int answer_cnt= 0;


void read_data(){
    ifstream ifs("bucket.inp");

    ifs >> k;

    for(int i=0; i<k; ++i){
        ifs >> bucket_volume[i];
     }

    for(int i=0; i<k; ++i){
        ifs >> bucket[i];
     }

    for(int i=0; i<k; ++i){
        ifs >> bucket_goal[i];
        answer += to_string(bucket_goal[i]);
     }


    ifs.close();
}



void solve(){
    queue<vector<int>> que;
     vector<int> v(8);
     vector<int> vec(8);
     vector<int> temp_vec(8);


    string str;
    int temp_cnt=0;
    int temp_buk1,temp_buk2=0;
    int decision=0;





    for(int i=0; i<k; ++i){
        v[i] = bucket[i];
    }

    que.push(v);

    while(!que.empty()){

        vec = que.front();

        que.pop();


        temp_cnt =vec[k];

        for(int i=0; i<k; ++i){
            for(int j=0; j<k; ++j){ //i->j

                if(i == j || vec[i] == 0 || vec[j] == bucket_volume[j]) continue;

                temp_buk1 = vec[i];
                temp_buk2 = vec[j];


                if(vec[i]+vec[j] > bucket_volume[j]){
                    vec[i] = vec[i]+vec[j] - bucket_volume[j];
                    vec[j] = bucket_volume[j];
                    ++vec[k];
                }

                else{
                    vec[i] = 0;
                    vec[j] = temp_buk1 + temp_buk2;
                    ++vec[k];
                }


                for(int n=0; n<k; ++n){
                    str += to_string(vec[n]);
                }


                if(chk[str] != 0){
                    if(vec[k] >= chk[str]){
                        decision = 1;
                    }
                }


                if(decision == 1){
                    decision = 0;

                    vec[i] = temp_buk1;
                    vec[j] = temp_buk2;
                    vec[k] = temp_cnt;
                    str = "";
                    continue;
                }


                chk[str] = vec[k];

                if(str.compare(answer) == 0){
                    if(answer_cnt == 0){
                       answer_cnt = vec[k];
                     }
                    else{
                        if(answer_cnt <= vec[k]){
                             continue;
                        }
                        else{
                           answer_cnt = vec[k];
                         }
                    }
                }


//                for(int t=0; t<=k; ++t){
//                    temp_vec[t] = vec[t];
//                }

                que.push(vec);

                vec[i] = temp_buk1;
                vec[j] = temp_buk2;
                vec[k] = temp_cnt;
                str = "";
                continue;
            }
        }

    }
}



void write_data(){
    ofstream ofs("bucket.out");
    ofs<<answer_cnt;
    ofs.close();
}



int main(){
    read_data();
    solve();
    write_data();
}

```
