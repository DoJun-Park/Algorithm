```c++
#include <iostream>
#include <fstream>
#include <stack>
#include <string.h>

using namespace std;

int N;
int index = -1;
int temp_index =0;
int pizza[10][10];
int pizza_cnt=0;
pair<int,int> check_pizza[81];



void read_data(){
    ifstream ifs("detroit.inp");
    ifs>>N;
    for(int i=0; i<N;++i){
        for(int j=0; j<N; ++j){
            ifs >> pizza[i][j];
            if(pizza[i][j] == 0) {
                ++index;
                check_pizza[index].first = i;
                check_pizza[index].second = j;
            }
        }
    }


////     table 출력
//    for (int i = 0; i < N; i++)
//    {
//        for (int j = 0; j < N; j++)
//            cout << pizza[i][j] << " ";
//        cout << endl;
//    }
//    cout << endl;


    ifs.close();
}


void write_data(int cnt){
    ofstream ofs("detroit.out");
    ofs << cnt;
    ofs.close();
}


int k=0;


void get_pizza_cnt(int check[10][10],int pizza_val, int start, int possible_pizza[10]){

//            for (int i = 0; i < N; i++){
//                for (int j = 0; j < N; j++)
//                    cout << pizza[i][j] << " ";
//                    cout << endl;
//                }

      if(start > index){
//            cout << "끝 !!"<<endl;
            for (int i = 0; i < N; i++){
                for (int j = 0; j < N; j++)
                    cout << pizza[i][j] << " ";
                    cout << endl;
                }
                    cout << endl;
//        exit(0);
        ++pizza_cnt;
        return;
    }

    pizza[check_pizza[start].first][check_pizza[start].second] = pizza_val;

    int chk =0;
    int in=0;
    for(int i=0; i<10; ++i) possible_pizza[i] =0;
    while(pizza[check_pizza[start].first][check_pizza[start].second]<=N){
        for(int k=0; k<N; ++k){
            if(pizza[check_pizza[start].first][check_pizza[start].second] == pizza[check_pizza[start].first][k]){
                if(check_pizza[start].second==k) ;
                else{
                    chk =1;
                }
            }
            if(pizza[check_pizza[start].first][check_pizza[start].second] == pizza[k][check_pizza[start].second]){
                if(check_pizza[start].first==k) ;
                else {
                    chk =1;
                }
            }
        }

        if(chk == 0){
            possible_pizza[in] = pizza[check_pizza[start].first][check_pizza[start].second];
            ++in;
        }
        chk =0;
        ++pizza[check_pizza[start].first][check_pizza[start].second];
    }

    if(possible_pizza[0] == 0){
         if(start==0){
            cout << "없는 경우  "<<endl;
            return;
        }
        else{
            pizza[check_pizza[start].first][check_pizza[start].second] = 0;
            --start;
            pizza_val = pizza[check_pizza[start].first][check_pizza[start].second] + 1;
            get_pizza_cnt(check,pizza_val, start,possible_pizza);
        }
    }

    in=0;

    while(possible_pizza[in] !=0){
       pizza[check_pizza[start].first][check_pizza[start].second] = possible_pizza[in];
       possible_pizza[in]=0;
       ++in;
//       for(int i=start+1; i<=index; ++i){
//            pizza[check_pizza[i].first][check_pizza[i].second] =0;
//       }
       cout << "start11 :"<< check_pizza[start].first<< "  "<<check_pizza[start].second<< endl;
       get_pizza_cnt(check, 1,++start,possible_pizza);
       cout << "possible:"<<possible_pizza[in]<<endl;
       cout << "start22 :"<< check_pizza[start].first<< "  "<<check_pizza[start].second<< endl;
       cout << pizza[0][0]<<endl;
    }

}



void get_pizza(){
    int temp_pizza[10][10];
    int possible_pizza_arr[10];
    memcpy(temp_pizza, pizza, sizeof(pizza));
    get_pizza_cnt(temp_pizza,1,0,possible_pizza_arr);

    cout << pizza_cnt << endl;
    return;

}


int main(){
    read_data();
    get_pizza();
    return 0;
}


```
