```c++
#include <iostream>
#include <fstream>

using namespace std;

int s,d,t,w;
int N;
int day,ride;
int ride_cnt[366];
int sequence_cnt=0;
int ticket[366];

void read_data(){
    ifstream ifs("ticket.inp");

    ifs >> s;
    ifs >> d;
    ifs >> t;
    ifs >> w;

    ifs >> N;

    for(int i=0; i<N; i++){
        ifs>>day;
        ifs>>ride;
        ride_cnt[day] = ride;
    }
    ifs.close();
}

void  find_ticket(){

    for(int i=1; i<=day; i++){
        ticket[i] += ticket[i-1];

        if(ride_cnt[i] != 0) {
            sequence_cnt++;
        }
        else sequence_cnt = 0;


        if(ride_cnt[i]*s < d)
            ticket[i] += ride_cnt[i]*s;

        else{
            ticket[i] += d;
        }


        if(sequence_cnt >= 3){
            if(ticket[i]> ticket[i-3]+t){
                ticket[i] = ticket[i-3]+t;
            }
        }

        if(i%7 == 0){
            if(ticket[i]> ticket[i-7]+w){
                ticket[i] = ticket[i-7]+w;
            }
        }
    }
}

void write_data(){
    ofstream ofs("ticket.out");
    ofs << ticket[day];
    ofs.close();
}

int main(){
    read_data();
    find_ticket();
    write_data();
    return 0;
}
```
